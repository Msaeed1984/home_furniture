<<<<<<< HEAD
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>المنزل الراقي | منتجات منزلية</title>

  <style>
    :root{
      --brand-blue:#058DCB;
      --brand-green:#7BBB45;

      --white:#ffffff;
      --bg:#f4f8fb;
      --text:#0b1b2a;
      --muted: rgba(11,27,42,.72);

      --radius: 18px;
      --radius-lg: 24px;

      --shadow: 0 18px 55px rgba(0,0,0,.14);
      --shadow-soft: 0 12px 28px rgba(0,0,0,.10);
    }

    *{ box-sizing: border-box; }
    html{ scroll-behavior: smooth; }
    body{
      margin:0;
      background: radial-gradient(circle at 15% 5%, rgba(5,141,203,.06), transparent 35%),
                  radial-gradient(circle at 85% 10%, rgba(123,187,69,.06), transparent 40%),
                  var(--bg);
      color: var(--text);
      font-family: "Segoe UI", Tahoma, Arial, sans-serif;
    }

    /* =========================
       HERO / BANNER
       ========================= */
    .hero-bg{
      position: relative;
      min-height: 440px;
      overflow: hidden;
      background: #0b1b2a;
      border-bottom: 1px solid rgba(0,0,0,.06);
    }

    .hero-video{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      z-index: 0;
      filter: brightness(.96) saturate(1.25) contrast(1.08);
      transform: scale(1.03);
    }

    .hero-bg::after{
      content:"";
      position:absolute;
      inset:0;
      z-index:1;
      background: linear-gradient(100deg,
        rgba(123,187,69,.30) 0%,
        rgba(123,187,69,.30) 58%,
        rgba(5,141,203,.30) 58%,
        rgba(5,141,203,.30) 100%);
      mix-blend-mode: multiply;
      pointer-events:none;
    }

    .hero-content{
      position: relative;
      z-index: 2;
      max-width: 1200px;
      margin: 0 auto;
      padding: 46px 18px;
      display:grid;
      grid-template-columns: 1.7fr .85fr;
      gap: 18px;
      align-items: start;
    }

    .hero-card{
      background: rgba(255,255,255,.94);
      border: 1px solid rgba(255,255,255,.42);
      border-radius: var(--radius-lg);
      box-shadow: 0 22px 60px rgba(0,0,0,.18);
      padding: 22px 22px 18px;
      position: relative;
      overflow:hidden;
    }

    .hero-card::before{
      content:"";
      position:absolute;
      inset:-55%;
      background: radial-gradient(circle, rgba(255,255,255,.55), transparent 55%);
      transform: rotate(18deg);
      opacity: .35;
      pointer-events:none;
    }

    .hero-title{
      margin: 0;
      font-size: 34px;
      font-weight: 950;
      letter-spacing: .2px;
    }

    .hero-desc{
      margin: 10px 0 0;
      color: rgba(11,27,42,.76);
      line-height: 1.9;
      font-size: 14.8px;
    }

    .hero-divider{
      margin-top: 14px;
      height: 2px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(5,141,203,.35), rgba(123,187,69,.35));
    }

    .hero-actions{
      margin-top: 14px;
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items:center;
      justify-content:flex-start;
    }

    .pill{
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(5,141,203,.08);
      border: 1px solid rgba(5,141,203,.16);
      font-weight: 950;
      font-size: 13px;
      cursor: pointer;
      user-select:none;
      transition: .15s ease;
      display:inline-flex;
      gap: 8px;
      align-items:center;
    }

    .pill::before{
      content:"";
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: rgba(5,141,203,.55);
      box-shadow: 0 0 0 4px rgba(5,141,203,.10);
    }

    .pill:hover{
      background: rgba(123,187,69,.12);
      border-color: rgba(123,187,69,.28);
      transform: translateY(-1px);
    }
    .pill:hover::before{
      background: rgba(123,187,69,.75);
      box-shadow: 0 0 0 4px rgba(123,187,69,.12);
    }
    .pill.active{
      background: rgba(123,187,69,.16);
      border-color: rgba(123,187,69,.36);
    }
    .pill.active::before{
      background: rgba(123,187,69,.90);
      box-shadow: 0 0 0 4px rgba(123,187,69,.15);
    }

    .hero-side{ color:#fff; }

    .side-card{
      background: rgba(15,18,20,.60);
      border: 1px solid rgba(255,255,255,.22);
      border-radius: 22px;
      padding: 18px;
      box-shadow: 0 18px 45px rgba(0,0,0,.25);
      backdrop-filter: blur(10px);
      position: sticky;
      top: 92px;
      overflow: hidden;
    }

    .side-card::before{
      content:"";
      position:absolute;
      inset:-40%;
      background: radial-gradient(circle, rgba(255,255,255,.18), transparent 55%);
      transform: rotate(12deg);
      opacity: .35;
      pointer-events:none;
    }

    .side-badge{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 9px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.22);
      font-weight: 950;
      margin-bottom: 10px;
      font-size: 13px;
    }

    .side-badge::before{
      content:"";
      width:10px;
      height:10px;
      border-radius:999px;
      background: rgba(123,187,69,.9);
      box-shadow: 0 0 0 5px rgba(123,187,69,.18);
    }

    .side-list{
      margin: 0;
      padding-right: 18px;
      line-height: 2;
      font-weight: 850;
      font-size: 13.5px;
      color: rgba(255,255,255,.95);
    }

    /* =========================
       PRODUCTS
       ========================= */
    .container{
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px 18px 10px;
    }

    .section-title{
      display:flex;
      align-items:center;
      justify-content:flex-start; /* RTL -> right */
      gap: 10px;
      margin: 18px 0 12px;
      font-size: 18px;
      font-weight: 950;
      text-align: right;
    }
    .section-title .dot{ order: -1; }

    .dot{
      width: 10px; height: 10px;
      border-radius: 999px;
      background: var(--brand-blue);
      outline: 4px solid rgba(5,141,203,.12);
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 14px;
    }

    .card{
      background: #fff;
      border-radius: 20px;
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: var(--shadow-soft);
      padding: 14px;
      transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
      overflow:hidden;
      position: relative;
    }
    .card:hover{
      transform: translateY(-3px);
      box-shadow: 0 18px 48px rgba(0,0,0,.14);
      border-color: rgba(5,141,203,.14);
    }

    .badge-top{
      position:absolute;
      top: 12px;
      left: 12px;
      z-index: 3;
      display:flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .b{
      font-size: 12px;
      font-weight: 950;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,.06);
      background: rgba(255,255,255,.82);
      backdrop-filter: blur(6px);
      box-shadow: 0 10px 18px rgba(0,0,0,.08);
      white-space: nowrap;
    }
    .b.new{ border-color: rgba(5,141,203,.22); }
    .b.best{ border-color: rgba(123,187,69,.28); }
    .b.offer{ border-color: rgba(255,160,0,.25); }

    .thumb{
      height: 160px;
      border-radius: 16px;
      border: 1px solid rgba(0,0,0,.06);
      overflow:hidden;
      position: relative;
      background:
        radial-gradient(circle at 22% 28%, rgba(5,141,203,.14), transparent 45%),
        radial-gradient(circle at 78% 34%, rgba(123,187,69,.14), transparent 46%),
        linear-gradient(135deg, rgba(123,187,69,.10), rgba(5,141,203,.10));
    }

    .thumb::before{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(90deg,
        rgba(255,255,255,0) 0%,
        rgba(255,255,255,.45) 50%,
        rgba(255,255,255,0) 100%);
      transform: translateX(-120%);
      animation: shimmer 1.35s infinite;
      opacity: .45;
      pointer-events:none;
    }
    .thumb.loaded::before{ display:none; }

    @keyframes shimmer{
      0%{ transform: translateX(-120%); }
      100%{ transform: translateX(120%); }
    }

    .thumb img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
      transform: scale(1.02);
      filter: saturate(1.08) contrast(1.03);
    }

    .name{
      font-weight: 950;
      margin: 12px 0 6px;
      font-size: 15px;
    }

    .desc{
      color: var(--muted);
      font-size: 13.5px;
      line-height: 1.7;
      min-height: 44px;
    }

    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-top: 12px;
    }

    .price{
      font-weight: 950;
      color: var(--brand-blue);
      background: rgba(5,141,203,.10);
      border: 1px solid rgba(5,141,203,.16);
      padding: 8px 10px;
      border-radius: 14px;
      white-space: nowrap;
    }

    .buy{
      cursor:pointer;
      border: 0;
      border-radius: 14px;
      padding: 10px 12px;
      font-weight: 950;
      background: var(--brand-green);
      color: #0b2a00;
      transition: transform .15s ease, opacity .15s ease;
      white-space: nowrap;
      box-shadow: 0 10px 24px rgba(0,0,0,.10);
    }
    .buy:hover{ transform: translateY(-1px); }
    .buy:active{ transform: translateY(0px); opacity:.92; }

    /* Toast */
    .toast{
      position: fixed;
      bottom: 18px;
      right: 18px;
      z-index: 2000;
      display:none;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 18px 55px rgba(0,0,0,.18);
      border-radius: 18px;
      padding: 12px 14px;
      min-width: 280px;
      max-width: 360px;
      backdrop-filter: blur(10px);
      overflow:hidden;
    }
    .toast.show{ display:block; animation: pop .18s ease; }
    @keyframes pop{ from{ transform: translateY(10px); opacity:.0; } to{ transform: translateY(0); opacity:1; } }

    .toast .t-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .toast .t-title{
      font-weight: 950;
      color: var(--text);
      font-size: 14px;
    }
    .toast .t-sub{
      font-weight: 850;
      color: rgba(11,27,42,.72);
      font-size: 12.5px;
      margin-top: 4px;
      line-height: 1.6;
    }
    .toast .t-dot{
      width: 12px; height: 12px;
      border-radius: 999px;
      background: var(--brand-green);
      outline: 4px solid rgba(123,187,69,.18);
      flex: 0 0 12px;
    }
    .toast .t-close{
      border:0;
      background: rgba(0,0,0,.06);
      border: 1px solid rgba(0,0,0,.08);
      border-radius: 12px;
      padding: 8px 10px;
      cursor:pointer;
      font-weight: 950;
    }

    /* Responsive */
    @media (max-width: 1100px){
      .hero-content{ grid-template-columns: 1fr; }
      .side-card{ position: relative; top: auto; }
      .grid{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 560px){
      .grid{ grid-template-columns: 1fr; }
      .hero-title{ font-size: 28px; }
      .toast{ left: 18px; right: 18px; max-width: unset; }
    }

    @media (prefers-reduced-motion: reduce){
      *{ scroll-behavior:auto !important; animation:none !important; transition:none !important; }
    }
  </style>
</head>

<body>
  <div id="header"></div>

  <!-- Hero -->
  <section class="hero-bg" id="home">
    <video class="hero-video" autoplay muted loop playsinline preload="metadata">
      <source src="media/video_banner.mp4" type="video/mp4">
    </video>

    <div class="hero-content">
      <div class="hero-card">
        <h1 class="hero-title">مرحباً بك في المنزل الراقي</h1>
        <p class="hero-desc">
          متجر منتجات منزلية بتجربة حديثة وسهلة — بحث ذكي، أقسام واضحة، ومنتجات مختارة بعناية.
        </p>

        <div class="hero-divider"></div>

        <!-- Filters -->
        <div class="hero-actions" id="categories">
          <div class="pill active" data-filter="all">الكل</div>
          <div class="pill" data-filter="ضيافة">الضيافة</div>
          <div class="pill" data-filter="ديكور">الديكور</div>
          <div class="pill" data-filter="منسوجات">المنسوجات</div>
          <div class="pill" data-filter="مطبخ">المطبخ</div>
        </div>
      </div>

      <aside class="hero-side">
        <div class="side-card">
          <div class="side-badge">عروض اليوم</div>
          <ul class="side-list">
            <li>شحن سريع داخل الإمارات</li>
            <li>خيارات متعددة للمنزل</li>
            <li>تحديثات أسبوعية للمنتجات</li>
          </ul>
        </div>
      </aside>
    </div>
  </section>

  <main class="container">
    <div class="section-title" id="products"><span class="dot"></span> أفضل المنتجات</div>

    <section class="grid" id="productGrid">

      <!-- 1 -->
      <article class="card" data-title="طقم قهوة فاخر" data-cat="ضيافة">
        <div class="badge-top"><span class="b best">الأكثر مبيعاً</span></div>
        <div class="thumb">
          <img alt="طقم قهوة" loading="lazy" referrerpolicy="no-referrer" data-fallback="coffee"
               src="https://images.unsplash.com/photo-1511920170033-f8396924c348?auto=format&fit=crop&w=1400&q=70" />
        </div>
        <div class="name">طقم قهوة</div>
        <div class="desc">طقم أنيق مناسب للضيافة اليومية والمناسبات.</div>
        <div class="row">
          <div class="price">AED 149</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 2 -->
      <article class="card" data-title="شموع معطرة فاخرة" data-cat="ديكور">
        <div class="badge-top"><span class="b offer">عرض</span></div>
        <div class="thumb">
          <img alt="شموع معطرة" loading="lazy" referrerpolicy="no-referrer" data-fallback="candles"
               src="https://m.media-amazon.com/images/I/61hp8p-IR1L._AC_UF1000,1000_QL80_.jpg" />
        </div>
        <div class="name">شموع معطرة</div>
        <div class="desc">لمسة فاخرة تضيف هدوءاً وجمالاً للمكان.</div>
        <div class="row">
          <div class="price">AED 39</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 3 -->
      <article class="card" data-title="مفرش طاولة أنيق" data-cat="منسوجات">
        <div class="badge-top"><span class="b new">جديد</span></div>
        <div class="thumb">
          <img alt="مفرش طاولة" loading="lazy" referrerpolicy="no-referrer" data-fallback="tablecloth"
               src="https://media.homecentre.com/i/homecentre/164779960-164779960-HC24082022_01-2100.jpg?fmt=auto&$quality-standard$&sm=c&$prodimg-m-sqr-pdp-2x$" />
        </div>
        <div class="name">مفرش طاولة</div>
        <div class="desc">خامة ناعمة وألوان راقية تناسب كل الديكورات.</div>
        <div class="row">
          <div class="price">AED 59</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 4 -->
      <article class="card" data-title="سلة تخزين عملية" data-cat="مطبخ">
        <div class="badge-top"><span class="b best">الأكثر مبيعاً</span></div>
        <div class="thumb">
          <img alt="سلة تخزين" loading="lazy" referrerpolicy="no-referrer" data-fallback="basket"
               src="https://media.homecentre.com/i/homecentre/164882456-164882456-HC28122022_02-2100.jpg?fmt=auto&$quality-standard$&sm=c&$prodimg-m-sqr-pdp-2x$" />
        </div>
        <div class="name">سلة تخزين</div>
        <div class="desc">عملية لتنظيم المطبخ أو غرفة المعيشة بشكل مرتب.</div>
        <div class="row">
          <div class="price">AED 79</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 5 -->
      <article class="card" data-title="مزهرية ديكور" data-cat="ديكور">
        <div class="badge-top"><span class="b new">جديد</span></div>
        <div class="thumb">
          <img alt="مزهرية" loading="lazy" referrerpolicy="no-referrer" data-fallback="candles"
               src="https://m.media-amazon.com/images/I/61KvH-iybDL._AC_UF1000,1000_QL80_.jpg" />
        </div>
        <div class="name">مزهرية</div>
        <div class="desc">لمسة ديكور أنيقة تناسب الصالة وغرفة النوم.</div>
        <div class="row">
          <div class="price">AED 89</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 6 -->
      <article class="card" data-title="مناشف قطنية" data-cat="منسوجات">
        <div class="badge-top"><span class="b offer">عرض</span></div>
        <div class="thumb">
          <img alt="مناشف" loading="lazy" referrerpolicy="no-referrer" data-fallback="tablecloth"
               src="https://img-1.kwcdn.com/product/open/62fbb53684a0424dbec49b0fe7cbef59-goods.jpeg?imageView2/2/w/800/q/70/format/avif" />
        </div>
        <div class="name">مناشف قطنية</div>
        <div class="desc">نعومة عالية وامتصاص ممتاز للاستخدام اليومي.</div>
        <div class="row">
          <div class="price">AED 45</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 7 -->
      <article class="card" data-title="طقم ملاعق مطبخ" data-cat="مطبخ">
        <div class="badge-top"><span class="b best">الأكثر مبيعاً</span></div>
        <div class="thumb">
          <img alt="طقم ملاعق" loading="lazy" referrerpolicy="no-referrer" data-fallback="basket"
               src="https://cdn.salla.sa/aeanXn/95601a0a-8a3d-47f7-9c71-ae825aec06b5-1000x1000-NB4SCXEB29fTSahzTaAdi421oOxjTo5utYGZ5Wi0.jpg" />
        </div>
        <div class="name">طقم ملاعق</div>
        <div class="desc">خامات ممتازة للاستخدام اليومي وتجهيز الضيافة.</div>
        <div class="row">
          <div class="price">AED 65</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 8 -->
      <article class="card" data-title="سجادة صغيرة" data-cat="منسوجات">
        <div class="badge-top"><span class="b new">جديد</span></div>
        <div class="thumb">
          <img alt="سجادة" loading="lazy" referrerpolicy="no-referrer" data-fallback="tablecloth"
               src="https://m.media-amazon.com/images/I/A1NliHaPOOL._AC_UF1000,1000_QL80_.jpg" />
        </div>
        <div class="name">سجادة صغيرة</div>
        <div class="desc">ستايل عصري يناسب مداخل البيت وغرف النوم.</div>
        <div class="row">
          <div class="price">AED 119</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 9 -->
      <article class="card" data-title="طقم أكواب زجاج" data-cat="ضيافة">
        <div class="badge-top"><span class="b offer">عرض</span></div>
        <div class="thumb">
          <img alt="أكواب زجاج" loading="lazy" referrerpolicy="no-referrer" data-fallback="coffee"
               src="https://media.homecentre.com/i/homecentre/167412722-167412722-HC11262024_01-2100.jpg?fmt=auto&$quality-standard$&sm=c&$prodimg-d-sqr-pdp-2x$" />
        </div>
        <div class="name">طقم أكواب</div>
        <div class="desc">أكواب أنيقة للضيافة مع تصميم مميز.</div>
        <div class="row">
          <div class="price">AED 72</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 10 -->
      <article class="card" data-title="صحن تقديم" data-cat="ضيافة">
        <div class="badge-top"><span class="b best">الأكثر مبيعاً</span></div>
        <div class="thumb">
          <img alt="صحن تقديم" loading="lazy" referrerpolicy="no-referrer" data-fallback="coffee"
               src="https://cdn.salla.sa/jWmgd/595e8506-cb05-4a27-aff4-10e5c33ae5ac-1000x666.66666666667-gCqpLBuYJj2kcMA88ZKQJsmU7Zl9r1nYAXz8FUKq.jpg" />
        </div>
        <div class="name">صحن تقديم</div>
        <div class="desc">تقديم راقٍ للمناسبات بطابع عصري.</div>
        <div class="row">
          <div class="price">AED 55</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 11 -->
      <article class="card" data-title="منظم مطبخ" data-cat="مطبخ">
        <div class="badge-top"><span class="b new">جديد</span></div>
        <div class="thumb">
          <img alt="منظم مطبخ" loading="lazy" referrerpolicy="no-referrer" data-fallback="basket"
               src="https://m.media-amazon.com/images/I/81vqYip5NYL._AC_UF1000,1000_QL80_.jpg" />
        </div>
        <div class="name">منظم مطبخ</div>
        <div class="desc">تنظيم عملي مع تصميم أنيق للرفوف والأدراج.</div>
        <div class="row">
          <div class="price">AED 69</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 12 -->
      <article class="card" data-title="مصباح ديكور" data-cat="ديكور">
        <div class="badge-top"><span class="b offer">عرض</span></div>
        <div class="thumb">
          <img alt="مصباح" loading="lazy" referrerpolicy="no-referrer" data-fallback="candles"
               src="https://static.hiamag.com/styles/1000x1000/public/2023-01/%D8%AA%D8%B5%D9%85%D9%8A%D9%85%20%D9%85%D8%B5%D8%A8%D8%A7%D8%AD%20%D8%A3%D8%B1%D8%B6%D9%8A%20%D9%84%D8%B2%D9%88%D8%A7%D9%8A%D8%A7%20%D8%A7%D9%84%D9%82%D8%B1%D8%A7%D8%A1%D8%A9.png?h=623acdad" />
        </div>
        <div class="name">مصباح ديكور</div>
        <div class="desc">إضاءة دافئة تضيف جمالاً وراحة للمكان.</div>
        <div class="row">
          <div class="price">AED 135</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

    </section>
  </main>

  <!-- Toast -->
  <div class="toast" id="toast">
    <div class="t-row">
      <div style="display:flex;align-items:center;gap:10px;">
        <span class="t-dot"></span>
        <div>
          <div class="t-title" id="toastTitle">تمت الإضافة</div>
          <div class="t-sub" id="toastSub">تمت إضافة المنتج إلى السلة بنجاح.</div>
        </div>
      </div>
      <button class="t-close" id="toastClose" type="button">إغلاق</button>
    </div>
  </div>

  <div id="footer"></div>

  <script>
    // Load header/footer
    async function loadPart(id, file){
      const el = document.getElementById(id);
      const res = await fetch(file, { cache: "no-store" });
      if(!res.ok){
        el.innerHTML = "<div style='padding:14px;font-weight:800'>تعذّر تحميل " + file + "</div>";
        return;
      }
      el.innerHTML = await res.text();
    }

    // Fallback SVG
    function fallbackSVG(kind){
      const map = {
        coffee: { label: "Coffee Set", icon: "M210 150h190 M250 150v-30c0-18 14-32 32-32h56c18 0 32 14 32 32v30 M270 150v60c0 18 14 32 32 32h36c18 0 32-14 32-32v-60 M420 155h30c18 0 30 12 30 28s-12 28-30 28h-30 M230 270h220" },
        candles:{ label: "Candles", icon: "M250 130c18-14 18-34 0-52 M320 120c18-14 18-34 0-52 M390 130c18-14 18-34 0-52 M220 140h80v130h-80z M300 140h90v130h-90z M390 140h80v130h-80z M200 280h240" },
        tablecloth:{ label: "Textile", icon: "M180 120h280v150H180z M210 140h220 M210 170h220 M210 200h220 M210 230h220 M240 270v35 M400 270v35" },
        basket:{ label: "Storage", icon: "M240 150c0-40 20-60 80-60s80 20 80 60 M210 150h260v130H210z M240 185h200 M240 215h200 M240 245h200" }
      };
      const it = map[kind] || map.coffee;
      const svg =
        `<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='700' viewBox='0 0 1200 700'>
          <defs>
            <linearGradient id='g' x1='0' x2='1'>
              <stop offset='0' stop-color='%237BBB45'/>
              <stop offset='1' stop-color='%23058DCB'/>
            </linearGradient>
          </defs>
          <rect width='1200' height='700' rx='38' fill='%23ffffff'/>
          <circle cx='220' cy='160' r='90' fill='url(%23g)' opacity='.14'/>
          <circle cx='980' cy='150' r='110' fill='url(%23g)' opacity='.12'/>
          <rect x='90' y='90' width='1020' height='520' rx='30' fill='%23f6fbff' stroke='%23e6eef6' />
          <path d='${it.icon}' fill='none' stroke='url(%23g)' stroke-width='20' stroke-linecap='round' stroke-linejoin='round'/>
          <text x='600' y='640' font-family='Segoe UI,Tahoma' font-size='46' font-weight='800' text-anchor='middle' fill='%230b1b2a' opacity='.72'>${it.label}</text>
        </svg>`;
      return "data:image/svg+xml;utf8," + encodeURIComponent(svg);
    }

    (async function init(){
      await loadPart("header", "header.html");
      await loadPart("footer", "footer.html");

      // =======================
      // Unified Filter + Search (Fix the "problem")
      // =======================
      let currentFilter = "all";
      let currentQuery  = "";

      function escapeHtml(s){
        return String(s).replace(/[&<>"']/g, m => ({
          "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
        }[m]));
      }

      function getCards(){
        return Array.from(document.querySelectorAll(".card[data-title]"));
      }

      function highlightText(card, query){
        const target = card.querySelector(".name");
        if(!target) return;
        const original = target.getAttribute("data-original") || target.textContent;
        if(!target.getAttribute("data-original")) target.setAttribute("data-original", original);

        if(!query){
          target.innerHTML = escapeHtml(original);
          return;
        }

        const re = new RegExp("(" + query.replace(/[.*+?^${}()|[\]\\]/g, "\\$&") + ")", "ig");
        target.innerHTML = escapeHtml(original).replace(
          re,
          "<mark style='background:rgba(123,187,69,.25);padding:0 4px;border-radius:8px;'>$1</mark>"
        );
      }

      function applyAll(){
        const q = (currentQuery || "").trim().toLowerCase();
        const cards = getCards();
        let hits = 0;

        cards.forEach(card=>{
          const title = (card.getAttribute("data-title") || "").toLowerCase();
          const cat = (card.getAttribute("data-cat") || "").toLowerCase();

          const matchFilter = (currentFilter === "all") || (cat === currentFilter.toLowerCase());
          const matchQuery  = (!q) || title.includes(q) || cat.includes(q);

          const show = matchFilter && matchQuery;
          card.style.display = show ? "" : "none";
          if(show) hits++;

          highlightText(card, q);
        });

        const counter = document.getElementById("searchCount");
        if(counter) counter.textContent = hits + " نتيجة";
      }

      // =======================
      // Wire Search UI from header.html
      // =======================
      function buildSuggestions(q){
        const query = (q || "").trim().toLowerCase();
        const box = document.getElementById("suggestions");
        if(!box) return;

        if(!query){
          box.classList.remove("open");
          box.innerHTML = "";
          return;
        }

        const cards = getCards();
        const items = [];
        cards.forEach(c => {
          const title = (c.getAttribute("data-title") || "").trim();
          const cat = (c.getAttribute("data-cat") || "").trim();
          if(title.toLowerCase().includes(query) || cat.toLowerCase().includes(query)){
            items.push({ title, cat });
          }
        });

        const unique = [];
        const seen = new Set();
        for(const it of items){
          const key = it.title + "|" + it.cat;
          if(!seen.has(key)){
            unique.push(it);
            seen.add(key);
          }
          if(unique.length >= 6) break;
        }

        if(unique.length === 0){
          box.classList.remove("open");
          box.innerHTML = "";
          return;
        }

        box.classList.add("open");
        box.innerHTML = unique.map(it => `
          <div class="s-item" data-title="${escapeHtml(it.title)}" role="option">
            <span>${escapeHtml(it.title)}</span>
            <span class="s-tag">${escapeHtml(it.cat)}</span>
          </div>
        `).join("");
      }

      function scrollToFirstVisible(){
        const first = document.querySelector(".card[data-title]:not([style*='display: none'])");
        if(first) first.scrollIntoView({ behavior: "smooth", block: "center" });
      }

      (function wireSearchUI(){
        const drawer = document.getElementById("searchDrawer");
        const btnSearch = document.getElementById("btnSearch");
        const btnClose = document.getElementById("searchClose");
        const btnGo = document.getElementById("searchGo");
        const input = document.getElementById("searchInput");
        const clear = document.getElementById("searchClear");
        const sug = document.getElementById("suggestions");

        if(!drawer || !btnSearch || !input) return;

        function openDrawer(){
          drawer.classList.add("open");
          drawer.setAttribute("aria-hidden","false");
          btnSearch.setAttribute("aria-expanded","true");
          setTimeout(()=> input.focus(), 60);
        }

        function closeDrawer(){
          drawer.classList.remove("open");
          drawer.setAttribute("aria-hidden","true");
          btnSearch.setAttribute("aria-expanded","false");
          if(sug){ sug.classList.remove("open"); sug.innerHTML = ""; }
        }

        btnSearch.addEventListener("click", () => {
          drawer.classList.contains("open") ? closeDrawer() : openDrawer();
        });
        btnClose && btnClose.addEventListener("click", closeDrawer);

        input.addEventListener("input", () => {
          currentQuery = input.value || "";
          applyAll();
          buildSuggestions(currentQuery);
          if(clear) clear.classList.toggle("show", (currentQuery.trim().length > 0));
        });

        clear && clear.addEventListener("click", () => {
          input.value = "";
          currentQuery = "";
          applyAll();
          buildSuggestions("");
          clear.classList.remove("show");
          input.focus();
        });

        btnGo && btnGo.addEventListener("click", () => {
          applyAll();
          scrollToFirstVisible();
        });

        document.addEventListener("keydown", (e) => {
          if(e.key === "/" && document.activeElement && document.activeElement.tagName !== "INPUT" && document.activeElement.tagName !== "TEXTAREA"){
            e.preventDefault();
            openDrawer();
          }
          if(e.key === "Escape"){
            closeDrawer();
          }
          if(e.key === "Enter" && drawer.classList.contains("open") && document.activeElement === input){
            e.preventDefault();
            applyAll();
            scrollToFirstVisible();
          }
        });

        sug && sug.addEventListener("click", (e) => {
          const item = e.target.closest(".s-item");
          if(!item) return;
          const title = item.getAttribute("data-title") || "";
          input.value = title;
          currentQuery = title;
          applyAll();
          buildSuggestions(title);
          scrollToFirstVisible();
        });

        applyAll();
      })();

      // =======================
      // Filter pills (integrated with search)
      // =======================
      const pills = document.querySelectorAll(".pill");
      pills.forEach(p=>{
        p.addEventListener("click", ()=>{
          pills.forEach(x=>x.classList.remove("active"));
          p.classList.add("active");
          currentFilter = p.getAttribute("data-filter") || "all";
          applyAll();
        });
      });

      // =======================
      // Toast
      // =======================
      const toast = document.getElementById("toast");
      const toastTitle = document.getElementById("toastTitle");
      const toastSub = document.getElementById("toastSub");
      const toastClose = document.getElementById("toastClose");
      let toastTimer = null;

      function showToast(title, sub){
        if(!toast) return;
        toastTitle.textContent = title || "تمت الإضافة";
        toastSub.textContent = sub || "تمت إضافة المنتج إلى السلة بنجاح.";
        toast.classList.add("show");
        clearTimeout(toastTimer);
        toastTimer = setTimeout(()=> toast.classList.remove("show"), 2600);
      }
      toastClose && toastClose.addEventListener("click", ()=> toast.classList.remove("show"));

      // =======================
      // Cart (same + nice micro interaction)
      // =======================
      let count = 0;

      function pulseCart(){
        const badge = document.getElementById("cartCount");
        if(!badge) return;
        badge.animate(
          [{ transform:"scale(1)" }, { transform:"scale(1.18)" }, { transform:"scale(1)" }],
          { duration: 260, easing:"ease-out" }
        );
      }

      function syncCart(){
        const badge = document.getElementById("cartCount");
        const clearBtn = document.getElementById("btnClearCart");
        if(badge) badge.textContent = String(count);
        if(clearBtn) clearBtn.hidden = count <= 1; // show only if > 1
      }

      document.querySelectorAll("[data-add]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const card = btn.closest(".card");
          const name = card ? (card.querySelector(".name")?.textContent || "المنتج") : "المنتج";
          count++;
          syncCart();
          pulseCart();
          showToast("تمت الإضافة للسلة ✅", `تمت إضافة: ${name}`);
        });
      });

      document.addEventListener("click", function(e){
        if(e.target && e.target.id === "btnClearCart"){
          count = 0;
          syncCart();
          showToast("تم تفريغ السلة ✅", "تم حذف كل المنتجات من السلة.");
        }
      });

      // =======================
      // Image load/error fix + fallback
      // =======================
      document.querySelectorAll(".thumb img").forEach(img=>{
        const thumb = img.closest(".thumb");

        function markLoaded(){
          if(thumb) thumb.classList.add("loaded");
        }

        img.addEventListener("load", markLoaded);

        img.addEventListener("error", () => {
          const kind = img.getAttribute("data-fallback") || "coffee";
          img.src = fallbackSVG(kind);
          markLoaded();
        });

        if(img.complete && img.naturalWidth > 0){
          markLoaded();
        }
      });
    })();
  </script>
</body>
</html>
=======
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>المنزل الراقي | منتجات منزلية</title>

  <style>
    :root{
      --brand-blue:#058DCB;
      --brand-green:#7BBB45;

      --white:#ffffff;
      --bg:#f4f8fb;
      --text:#0b1b2a;
      --muted: rgba(11,27,42,.72);

      --radius: 18px;
      --radius-lg: 24px;

      --shadow: 0 18px 55px rgba(0,0,0,.14);
      --shadow-soft: 0 12px 28px rgba(0,0,0,.10);
    }

    *{ box-sizing: border-box; }
    html{ scroll-behavior: smooth; }
    body{
      margin:0;
      background: radial-gradient(circle at 15% 5%, rgba(5,141,203,.06), transparent 35%),
                  radial-gradient(circle at 85% 10%, rgba(123,187,69,.06), transparent 40%),
                  var(--bg);
      color: var(--text);
      font-family: "Segoe UI", Tahoma, Arial, sans-serif;
    }

    /* =========================
       HERO / BANNER
       ========================= */
    .hero-bg{
      position: relative;
      min-height: 440px;
      overflow: hidden;
      background: #0b1b2a;
      border-bottom: 1px solid rgba(0,0,0,.06);
    }

    .hero-video{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      z-index: 0;
      filter: brightness(.96) saturate(1.25) contrast(1.08);
      transform: scale(1.03);
    }

    .hero-bg::after{
      content:"";
      position:absolute;
      inset:0;
      z-index:1;
      background: linear-gradient(100deg,
        rgba(123,187,69,.30) 0%,
        rgba(123,187,69,.30) 58%,
        rgba(5,141,203,.30) 58%,
        rgba(5,141,203,.30) 100%);
      mix-blend-mode: multiply;
      pointer-events:none;
    }

    .hero-content{
      position: relative;
      z-index: 2;
      max-width: 1200px;
      margin: 0 auto;
      padding: 46px 18px;
      display:grid;
      grid-template-columns: 1.7fr .85fr;
      gap: 18px;
      align-items: start;
    }

    .hero-card{
      background: rgba(255,255,255,.94);
      border: 1px solid rgba(255,255,255,.42);
      border-radius: var(--radius-lg);
      box-shadow: 0 22px 60px rgba(0,0,0,.18);
      padding: 22px 22px 18px;
      position: relative;
      overflow:hidden;
    }

    .hero-card::before{
      content:"";
      position:absolute;
      inset:-55%;
      background: radial-gradient(circle, rgba(255,255,255,.55), transparent 55%);
      transform: rotate(18deg);
      opacity: .35;
      pointer-events:none;
    }

    .hero-title{
      margin: 0;
      font-size: 34px;
      font-weight: 950;
      letter-spacing: .2px;
    }

    .hero-desc{
      margin: 10px 0 0;
      color: rgba(11,27,42,.76);
      line-height: 1.9;
      font-size: 14.8px;
    }

    .hero-divider{
      margin-top: 14px;
      height: 2px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(5,141,203,.35), rgba(123,187,69,.35));
    }

    .hero-actions{
      margin-top: 14px;
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items:center;
      justify-content:flex-start;
    }

    .pill{
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(5,141,203,.08);
      border: 1px solid rgba(5,141,203,.16);
      font-weight: 950;
      font-size: 13px;
      cursor: pointer;
      user-select:none;
      transition: .15s ease;
      display:inline-flex;
      gap: 8px;
      align-items:center;
    }

    .pill::before{
      content:"";
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: rgba(5,141,203,.55);
      box-shadow: 0 0 0 4px rgba(5,141,203,.10);
    }

    .pill:hover{
      background: rgba(123,187,69,.12);
      border-color: rgba(123,187,69,.28);
      transform: translateY(-1px);
    }
    .pill:hover::before{
      background: rgba(123,187,69,.75);
      box-shadow: 0 0 0 4px rgba(123,187,69,.12);
    }
    .pill.active{
      background: rgba(123,187,69,.16);
      border-color: rgba(123,187,69,.36);
    }
    .pill.active::before{
      background: rgba(123,187,69,.90);
      box-shadow: 0 0 0 4px rgba(123,187,69,.15);
    }

    .hero-side{ color:#fff; }

    .side-card{
      background: rgba(15,18,20,.60);
      border: 1px solid rgba(255,255,255,.22);
      border-radius: 22px;
      padding: 18px;
      box-shadow: 0 18px 45px rgba(0,0,0,.25);
      backdrop-filter: blur(10px);
      position: sticky;
      top: 92px;
      overflow: hidden;
    }

    .side-card::before{
      content:"";
      position:absolute;
      inset:-40%;
      background: radial-gradient(circle, rgba(255,255,255,.18), transparent 55%);
      transform: rotate(12deg);
      opacity: .35;
      pointer-events:none;
    }

    .side-badge{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 9px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.22);
      font-weight: 950;
      margin-bottom: 10px;
      font-size: 13px;
    }

    .side-badge::before{
      content:"";
      width:10px;
      height:10px;
      border-radius:999px;
      background: rgba(123,187,69,.9);
      box-shadow: 0 0 0 5px rgba(123,187,69,.18);
    }

    .side-list{
      margin: 0;
      padding-right: 18px;
      line-height: 2;
      font-weight: 850;
      font-size: 13.5px;
      color: rgba(255,255,255,.95);
    }

    /* =========================
       PRODUCTS
       ========================= */
    .container{
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px 18px 10px;
    }

    .section-title{
      display:flex;
      align-items:center;
      justify-content:flex-start; /* RTL -> right */
      gap: 10px;
      margin: 18px 0 12px;
      font-size: 18px;
      font-weight: 950;
      text-align: right;
    }
    .section-title .dot{ order: -1; }

    .dot{
      width: 10px; height: 10px;
      border-radius: 999px;
      background: var(--brand-blue);
      outline: 4px solid rgba(5,141,203,.12);
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 14px;
    }

    .card{
      background: #fff;
      border-radius: 20px;
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: var(--shadow-soft);
      padding: 14px;
      transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
      overflow:hidden;
      position: relative;
    }
    .card:hover{
      transform: translateY(-3px);
      box-shadow: 0 18px 48px rgba(0,0,0,.14);
      border-color: rgba(5,141,203,.14);
    }

    .badge-top{
      position:absolute;
      top: 12px;
      left: 12px;
      z-index: 3;
      display:flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .b{
      font-size: 12px;
      font-weight: 950;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,.06);
      background: rgba(255,255,255,.82);
      backdrop-filter: blur(6px);
      box-shadow: 0 10px 18px rgba(0,0,0,.08);
      white-space: nowrap;
    }
    .b.new{ border-color: rgba(5,141,203,.22); }
    .b.best{ border-color: rgba(123,187,69,.28); }
    .b.offer{ border-color: rgba(255,160,0,.25); }

    .thumb{
      height: 160px;
      border-radius: 16px;
      border: 1px solid rgba(0,0,0,.06);
      overflow:hidden;
      position: relative;
      background:
        radial-gradient(circle at 22% 28%, rgba(5,141,203,.14), transparent 45%),
        radial-gradient(circle at 78% 34%, rgba(123,187,69,.14), transparent 46%),
        linear-gradient(135deg, rgba(123,187,69,.10), rgba(5,141,203,.10));
    }

    .thumb::before{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(90deg,
        rgba(255,255,255,0) 0%,
        rgba(255,255,255,.45) 50%,
        rgba(255,255,255,0) 100%);
      transform: translateX(-120%);
      animation: shimmer 1.35s infinite;
      opacity: .45;
      pointer-events:none;
    }
    .thumb.loaded::before{ display:none; }

    @keyframes shimmer{
      0%{ transform: translateX(-120%); }
      100%{ transform: translateX(120%); }
    }

    .thumb img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
      transform: scale(1.02);
      filter: saturate(1.08) contrast(1.03);
    }

    .name{
      font-weight: 950;
      margin: 12px 0 6px;
      font-size: 15px;
    }

    .desc{
      color: var(--muted);
      font-size: 13.5px;
      line-height: 1.7;
      min-height: 44px;
    }

    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-top: 12px;
    }

    .price{
      font-weight: 950;
      color: var(--brand-blue);
      background: rgba(5,141,203,.10);
      border: 1px solid rgba(5,141,203,.16);
      padding: 8px 10px;
      border-radius: 14px;
      white-space: nowrap;
    }

    .buy{
      cursor:pointer;
      border: 0;
      border-radius: 14px;
      padding: 10px 12px;
      font-weight: 950;
      background: var(--brand-green);
      color: #0b2a00;
      transition: transform .15s ease, opacity .15s ease;
      white-space: nowrap;
      box-shadow: 0 10px 24px rgba(0,0,0,.10);
    }
    .buy:hover{ transform: translateY(-1px); }
    .buy:active{ transform: translateY(0px); opacity:.92; }

    /* Toast */
    .toast{
      position: fixed;
      bottom: 18px;
      right: 18px;
      z-index: 2000;
      display:none;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 18px 55px rgba(0,0,0,.18);
      border-radius: 18px;
      padding: 12px 14px;
      min-width: 280px;
      max-width: 360px;
      backdrop-filter: blur(10px);
      overflow:hidden;
    }
    .toast.show{ display:block; animation: pop .18s ease; }
    @keyframes pop{ from{ transform: translateY(10px); opacity:.0; } to{ transform: translateY(0); opacity:1; } }

    .toast .t-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .toast .t-title{
      font-weight: 950;
      color: var(--text);
      font-size: 14px;
    }
    .toast .t-sub{
      font-weight: 850;
      color: rgba(11,27,42,.72);
      font-size: 12.5px;
      margin-top: 4px;
      line-height: 1.6;
    }
    .toast .t-dot{
      width: 12px; height: 12px;
      border-radius: 999px;
      background: var(--brand-green);
      outline: 4px solid rgba(123,187,69,.18);
      flex: 0 0 12px;
    }
    .toast .t-close{
      border:0;
      background: rgba(0,0,0,.06);
      border: 1px solid rgba(0,0,0,.08);
      border-radius: 12px;
      padding: 8px 10px;
      cursor:pointer;
      font-weight: 950;
    }

    /* Responsive */
    @media (max-width: 1100px){
      .hero-content{ grid-template-columns: 1fr; }
      .side-card{ position: relative; top: auto; }
      .grid{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 560px){
      .grid{ grid-template-columns: 1fr; }
      .hero-title{ font-size: 28px; }
      .toast{ left: 18px; right: 18px; max-width: unset; }
    }

    @media (prefers-reduced-motion: reduce){
      *{ scroll-behavior:auto !important; animation:none !important; transition:none !important; }
    }
  </style>
</head>

<body>
  <div id="header"></div>

  <!-- Hero -->
  <section class="hero-bg" id="home">
    <video class="hero-video" autoplay muted loop playsinline preload="metadata">
      <source src="media/video_banner.mp4" type="video/mp4">
    </video>

    <div class="hero-content">
      <div class="hero-card">
        <h1 class="hero-title">مرحباً بك في المنزل الراقي</h1>
        <p class="hero-desc">
          متجر منتجات منزلية بتجربة حديثة وسهلة — بحث ذكي، أقسام واضحة، ومنتجات مختارة بعناية.
        </p>

        <div class="hero-divider"></div>

        <!-- Filters -->
        <div class="hero-actions" id="categories">
          <div class="pill active" data-filter="all">الكل</div>
          <div class="pill" data-filter="ضيافة">الضيافة</div>
          <div class="pill" data-filter="ديكور">الديكور</div>
          <div class="pill" data-filter="منسوجات">المنسوجات</div>
          <div class="pill" data-filter="مطبخ">المطبخ</div>
        </div>
      </div>

      <aside class="hero-side">
        <div class="side-card">
          <div class="side-badge">عروض اليوم</div>
          <ul class="side-list">
            <li>شحن سريع داخل الإمارات</li>
            <li>خيارات متعددة للمنزل</li>
            <li>تحديثات أسبوعية للمنتجات</li>
          </ul>
        </div>
      </aside>
    </div>
  </section>

  <main class="container">
    <div class="section-title" id="products"><span class="dot"></span> أفضل المنتجات</div>

    <section class="grid" id="productGrid">

      <!-- 1 -->
      <article class="card" data-title="طقم قهوة فاخر" data-cat="ضيافة">
        <div class="badge-top"><span class="b best">الأكثر مبيعاً</span></div>
        <div class="thumb">
          <img alt="طقم قهوة" loading="lazy" referrerpolicy="no-referrer" data-fallback="coffee"
               src="https://images.unsplash.com/photo-1511920170033-f8396924c348?auto=format&fit=crop&w=1400&q=70" />
        </div>
        <div class="name">طقم قهوة</div>
        <div class="desc">طقم أنيق مناسب للضيافة اليومية والمناسبات.</div>
        <div class="row">
          <div class="price">AED 149</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 2 -->
      <article class="card" data-title="شموع معطرة فاخرة" data-cat="ديكور">
        <div class="badge-top"><span class="b offer">عرض</span></div>
        <div class="thumb">
          <img alt="شموع معطرة" loading="lazy" referrerpolicy="no-referrer" data-fallback="candles"
               src="https://m.media-amazon.com/images/I/61hp8p-IR1L._AC_UF1000,1000_QL80_.jpg" />
        </div>
        <div class="name">شموع معطرة</div>
        <div class="desc">لمسة فاخرة تضيف هدوءاً وجمالاً للمكان.</div>
        <div class="row">
          <div class="price">AED 39</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 3 -->
      <article class="card" data-title="مفرش طاولة أنيق" data-cat="منسوجات">
        <div class="badge-top"><span class="b new">جديد</span></div>
        <div class="thumb">
          <img alt="مفرش طاولة" loading="lazy" referrerpolicy="no-referrer" data-fallback="tablecloth"
               src="https://media.homecentre.com/i/homecentre/164779960-164779960-HC24082022_01-2100.jpg?fmt=auto&$quality-standard$&sm=c&$prodimg-m-sqr-pdp-2x$" />
        </div>
        <div class="name">مفرش طاولة</div>
        <div class="desc">خامة ناعمة وألوان راقية تناسب كل الديكورات.</div>
        <div class="row">
          <div class="price">AED 59</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 4 -->
      <article class="card" data-title="سلة تخزين عملية" data-cat="مطبخ">
        <div class="badge-top"><span class="b best">الأكثر مبيعاً</span></div>
        <div class="thumb">
          <img alt="سلة تخزين" loading="lazy" referrerpolicy="no-referrer" data-fallback="basket"
               src="https://media.homecentre.com/i/homecentre/164882456-164882456-HC28122022_02-2100.jpg?fmt=auto&$quality-standard$&sm=c&$prodimg-m-sqr-pdp-2x$" />
        </div>
        <div class="name">سلة تخزين</div>
        <div class="desc">عملية لتنظيم المطبخ أو غرفة المعيشة بشكل مرتب.</div>
        <div class="row">
          <div class="price">AED 79</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 5 -->
      <article class="card" data-title="مزهرية ديكور" data-cat="ديكور">
        <div class="badge-top"><span class="b new">جديد</span></div>
        <div class="thumb">
          <img alt="مزهرية" loading="lazy" referrerpolicy="no-referrer" data-fallback="candles"
               src="https://m.media-amazon.com/images/I/61KvH-iybDL._AC_UF1000,1000_QL80_.jpg" />
        </div>
        <div class="name">مزهرية</div>
        <div class="desc">لمسة ديكور أنيقة تناسب الصالة وغرفة النوم.</div>
        <div class="row">
          <div class="price">AED 89</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 6 -->
      <article class="card" data-title="مناشف قطنية" data-cat="منسوجات">
        <div class="badge-top"><span class="b offer">عرض</span></div>
        <div class="thumb">
          <img alt="مناشف" loading="lazy" referrerpolicy="no-referrer" data-fallback="tablecloth"
               src="https://img-1.kwcdn.com/product/open/62fbb53684a0424dbec49b0fe7cbef59-goods.jpeg?imageView2/2/w/800/q/70/format/avif" />
        </div>
        <div class="name">مناشف قطنية</div>
        <div class="desc">نعومة عالية وامتصاص ممتاز للاستخدام اليومي.</div>
        <div class="row">
          <div class="price">AED 45</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 7 -->
      <article class="card" data-title="طقم ملاعق مطبخ" data-cat="مطبخ">
        <div class="badge-top"><span class="b best">الأكثر مبيعاً</span></div>
        <div class="thumb">
          <img alt="طقم ملاعق" loading="lazy" referrerpolicy="no-referrer" data-fallback="basket"
               src="https://cdn.salla.sa/aeanXn/95601a0a-8a3d-47f7-9c71-ae825aec06b5-1000x1000-NB4SCXEB29fTSahzTaAdi421oOxjTo5utYGZ5Wi0.jpg" />
        </div>
        <div class="name">طقم ملاعق</div>
        <div class="desc">خامات ممتازة للاستخدام اليومي وتجهيز الضيافة.</div>
        <div class="row">
          <div class="price">AED 65</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 8 -->
      <article class="card" data-title="سجادة صغيرة" data-cat="منسوجات">
        <div class="badge-top"><span class="b new">جديد</span></div>
        <div class="thumb">
          <img alt="سجادة" loading="lazy" referrerpolicy="no-referrer" data-fallback="tablecloth"
               src="https://m.media-amazon.com/images/I/A1NliHaPOOL._AC_UF1000,1000_QL80_.jpg" />
        </div>
        <div class="name">سجادة صغيرة</div>
        <div class="desc">ستايل عصري يناسب مداخل البيت وغرف النوم.</div>
        <div class="row">
          <div class="price">AED 119</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 9 -->
      <article class="card" data-title="طقم أكواب زجاج" data-cat="ضيافة">
        <div class="badge-top"><span class="b offer">عرض</span></div>
        <div class="thumb">
          <img alt="أكواب زجاج" loading="lazy" referrerpolicy="no-referrer" data-fallback="coffee"
               src="https://media.homecentre.com/i/homecentre/167412722-167412722-HC11262024_01-2100.jpg?fmt=auto&$quality-standard$&sm=c&$prodimg-d-sqr-pdp-2x$" />
        </div>
        <div class="name">طقم أكواب</div>
        <div class="desc">أكواب أنيقة للضيافة مع تصميم مميز.</div>
        <div class="row">
          <div class="price">AED 72</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 10 -->
      <article class="card" data-title="صحن تقديم" data-cat="ضيافة">
        <div class="badge-top"><span class="b best">الأكثر مبيعاً</span></div>
        <div class="thumb">
          <img alt="صحن تقديم" loading="lazy" referrerpolicy="no-referrer" data-fallback="coffee"
               src="https://cdn.salla.sa/jWmgd/595e8506-cb05-4a27-aff4-10e5c33ae5ac-1000x666.66666666667-gCqpLBuYJj2kcMA88ZKQJsmU7Zl9r1nYAXz8FUKq.jpg" />
        </div>
        <div class="name">صحن تقديم</div>
        <div class="desc">تقديم راقٍ للمناسبات بطابع عصري.</div>
        <div class="row">
          <div class="price">AED 55</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 11 -->
      <article class="card" data-title="منظم مطبخ" data-cat="مطبخ">
        <div class="badge-top"><span class="b new">جديد</span></div>
        <div class="thumb">
          <img alt="منظم مطبخ" loading="lazy" referrerpolicy="no-referrer" data-fallback="basket"
               src="https://m.media-amazon.com/images/I/81vqYip5NYL._AC_UF1000,1000_QL80_.jpg" />
        </div>
        <div class="name">منظم مطبخ</div>
        <div class="desc">تنظيم عملي مع تصميم أنيق للرفوف والأدراج.</div>
        <div class="row">
          <div class="price">AED 69</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

      <!-- 12 -->
      <article class="card" data-title="مصباح ديكور" data-cat="ديكور">
        <div class="badge-top"><span class="b offer">عرض</span></div>
        <div class="thumb">
          <img alt="مصباح" loading="lazy" referrerpolicy="no-referrer" data-fallback="candles"
               src="https://static.hiamag.com/styles/1000x1000/public/2023-01/%D8%AA%D8%B5%D9%85%D9%8A%D9%85%20%D9%85%D8%B5%D8%A8%D8%A7%D8%AD%20%D8%A3%D8%B1%D8%B6%D9%8A%20%D9%84%D8%B2%D9%88%D8%A7%D9%8A%D8%A7%20%D8%A7%D9%84%D9%82%D8%B1%D8%A7%D8%A1%D8%A9.png?h=623acdad" />
        </div>
        <div class="name">مصباح ديكور</div>
        <div class="desc">إضاءة دافئة تضيف جمالاً وراحة للمكان.</div>
        <div class="row">
          <div class="price">AED 135</div>
          <button class="buy" type="button" data-add>إضافة للسلة</button>
        </div>
      </article>

    </section>
  </main>

  <!-- Toast -->
  <div class="toast" id="toast">
    <div class="t-row">
      <div style="display:flex;align-items:center;gap:10px;">
        <span class="t-dot"></span>
        <div>
          <div class="t-title" id="toastTitle">تمت الإضافة</div>
          <div class="t-sub" id="toastSub">تمت إضافة المنتج إلى السلة بنجاح.</div>
        </div>
      </div>
      <button class="t-close" id="toastClose" type="button">إغلاق</button>
    </div>
  </div>

  <div id="footer"></div>

  <script>
    // Load header/footer
    async function loadPart(id, file){
      const el = document.getElementById(id);
      const res = await fetch(file, { cache: "no-store" });
      if(!res.ok){
        el.innerHTML = "<div style='padding:14px;font-weight:800'>تعذّر تحميل " + file + "</div>";
        return;
      }
      el.innerHTML = await res.text();
    }

    // Fallback SVG
    function fallbackSVG(kind){
      const map = {
        coffee: { label: "Coffee Set", icon: "M210 150h190 M250 150v-30c0-18 14-32 32-32h56c18 0 32 14 32 32v30 M270 150v60c0 18 14 32 32 32h36c18 0 32-14 32-32v-60 M420 155h30c18 0 30 12 30 28s-12 28-30 28h-30 M230 270h220" },
        candles:{ label: "Candles", icon: "M250 130c18-14 18-34 0-52 M320 120c18-14 18-34 0-52 M390 130c18-14 18-34 0-52 M220 140h80v130h-80z M300 140h90v130h-90z M390 140h80v130h-80z M200 280h240" },
        tablecloth:{ label: "Textile", icon: "M180 120h280v150H180z M210 140h220 M210 170h220 M210 200h220 M210 230h220 M240 270v35 M400 270v35" },
        basket:{ label: "Storage", icon: "M240 150c0-40 20-60 80-60s80 20 80 60 M210 150h260v130H210z M240 185h200 M240 215h200 M240 245h200" }
      };
      const it = map[kind] || map.coffee;
      const svg =
        `<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='700' viewBox='0 0 1200 700'>
          <defs>
            <linearGradient id='g' x1='0' x2='1'>
              <stop offset='0' stop-color='%237BBB45'/>
              <stop offset='1' stop-color='%23058DCB'/>
            </linearGradient>
          </defs>
          <rect width='1200' height='700' rx='38' fill='%23ffffff'/>
          <circle cx='220' cy='160' r='90' fill='url(%23g)' opacity='.14'/>
          <circle cx='980' cy='150' r='110' fill='url(%23g)' opacity='.12'/>
          <rect x='90' y='90' width='1020' height='520' rx='30' fill='%23f6fbff' stroke='%23e6eef6' />
          <path d='${it.icon}' fill='none' stroke='url(%23g)' stroke-width='20' stroke-linecap='round' stroke-linejoin='round'/>
          <text x='600' y='640' font-family='Segoe UI,Tahoma' font-size='46' font-weight='800' text-anchor='middle' fill='%230b1b2a' opacity='.72'>${it.label}</text>
        </svg>`;
      return "data:image/svg+xml;utf8," + encodeURIComponent(svg);
    }

    (async function init(){
      await loadPart("header", "header.html");
      await loadPart("footer", "footer.html");

      // =======================
      // Unified Filter + Search (Fix the "problem")
      // =======================
      let currentFilter = "all";
      let currentQuery  = "";

      function escapeHtml(s){
        return String(s).replace(/[&<>"']/g, m => ({
          "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
        }[m]));
      }

      function getCards(){
        return Array.from(document.querySelectorAll(".card[data-title]"));
      }

      function highlightText(card, query){
        const target = card.querySelector(".name");
        if(!target) return;
        const original = target.getAttribute("data-original") || target.textContent;
        if(!target.getAttribute("data-original")) target.setAttribute("data-original", original);

        if(!query){
          target.innerHTML = escapeHtml(original);
          return;
        }

        const re = new RegExp("(" + query.replace(/[.*+?^${}()|[\]\\]/g, "\\$&") + ")", "ig");
        target.innerHTML = escapeHtml(original).replace(
          re,
          "<mark style='background:rgba(123,187,69,.25);padding:0 4px;border-radius:8px;'>$1</mark>"
        );
      }

      function applyAll(){
        const q = (currentQuery || "").trim().toLowerCase();
        const cards = getCards();
        let hits = 0;

        cards.forEach(card=>{
          const title = (card.getAttribute("data-title") || "").toLowerCase();
          const cat = (card.getAttribute("data-cat") || "").toLowerCase();

          const matchFilter = (currentFilter === "all") || (cat === currentFilter.toLowerCase());
          const matchQuery  = (!q) || title.includes(q) || cat.includes(q);

          const show = matchFilter && matchQuery;
          card.style.display = show ? "" : "none";
          if(show) hits++;

          highlightText(card, q);
        });

        const counter = document.getElementById("searchCount");
        if(counter) counter.textContent = hits + " نتيجة";
      }

      // =======================
      // Wire Search UI from header.html
      // =======================
      function buildSuggestions(q){
        const query = (q || "").trim().toLowerCase();
        const box = document.getElementById("suggestions");
        if(!box) return;

        if(!query){
          box.classList.remove("open");
          box.innerHTML = "";
          return;
        }

        const cards = getCards();
        const items = [];
        cards.forEach(c => {
          const title = (c.getAttribute("data-title") || "").trim();
          const cat = (c.getAttribute("data-cat") || "").trim();
          if(title.toLowerCase().includes(query) || cat.toLowerCase().includes(query)){
            items.push({ title, cat });
          }
        });

        const unique = [];
        const seen = new Set();
        for(const it of items){
          const key = it.title + "|" + it.cat;
          if(!seen.has(key)){
            unique.push(it);
            seen.add(key);
          }
          if(unique.length >= 6) break;
        }

        if(unique.length === 0){
          box.classList.remove("open");
          box.innerHTML = "";
          return;
        }

        box.classList.add("open");
        box.innerHTML = unique.map(it => `
          <div class="s-item" data-title="${escapeHtml(it.title)}" role="option">
            <span>${escapeHtml(it.title)}</span>
            <span class="s-tag">${escapeHtml(it.cat)}</span>
          </div>
        `).join("");
      }

      function scrollToFirstVisible(){
        const first = document.querySelector(".card[data-title]:not([style*='display: none'])");
        if(first) first.scrollIntoView({ behavior: "smooth", block: "center" });
      }

      (function wireSearchUI(){
        const drawer = document.getElementById("searchDrawer");
        const btnSearch = document.getElementById("btnSearch");
        const btnClose = document.getElementById("searchClose");
        const btnGo = document.getElementById("searchGo");
        const input = document.getElementById("searchInput");
        const clear = document.getElementById("searchClear");
        const sug = document.getElementById("suggestions");

        if(!drawer || !btnSearch || !input) return;

        function openDrawer(){
          drawer.classList.add("open");
          drawer.setAttribute("aria-hidden","false");
          btnSearch.setAttribute("aria-expanded","true");
          setTimeout(()=> input.focus(), 60);
        }

        function closeDrawer(){
          drawer.classList.remove("open");
          drawer.setAttribute("aria-hidden","true");
          btnSearch.setAttribute("aria-expanded","false");
          if(sug){ sug.classList.remove("open"); sug.innerHTML = ""; }
        }

        btnSearch.addEventListener("click", () => {
          drawer.classList.contains("open") ? closeDrawer() : openDrawer();
        });
        btnClose && btnClose.addEventListener("click", closeDrawer);

        input.addEventListener("input", () => {
          currentQuery = input.value || "";
          applyAll();
          buildSuggestions(currentQuery);
          if(clear) clear.classList.toggle("show", (currentQuery.trim().length > 0));
        });

        clear && clear.addEventListener("click", () => {
          input.value = "";
          currentQuery = "";
          applyAll();
          buildSuggestions("");
          clear.classList.remove("show");
          input.focus();
        });

        btnGo && btnGo.addEventListener("click", () => {
          applyAll();
          scrollToFirstVisible();
        });

        document.addEventListener("keydown", (e) => {
          if(e.key === "/" && document.activeElement && document.activeElement.tagName !== "INPUT" && document.activeElement.tagName !== "TEXTAREA"){
            e.preventDefault();
            openDrawer();
          }
          if(e.key === "Escape"){
            closeDrawer();
          }
          if(e.key === "Enter" && drawer.classList.contains("open") && document.activeElement === input){
            e.preventDefault();
            applyAll();
            scrollToFirstVisible();
          }
        });

        sug && sug.addEventListener("click", (e) => {
          const item = e.target.closest(".s-item");
          if(!item) return;
          const title = item.getAttribute("data-title") || "";
          input.value = title;
          currentQuery = title;
          applyAll();
          buildSuggestions(title);
          scrollToFirstVisible();
        });

        applyAll();
      })();

      // =======================
      // Filter pills (integrated with search)
      // =======================
      const pills = document.querySelectorAll(".pill");
      pills.forEach(p=>{
        p.addEventListener("click", ()=>{
          pills.forEach(x=>x.classList.remove("active"));
          p.classList.add("active");
          currentFilter = p.getAttribute("data-filter") || "all";
          applyAll();
        });
      });

      // =======================
      // Toast
      // =======================
      const toast = document.getElementById("toast");
      const toastTitle = document.getElementById("toastTitle");
      const toastSub = document.getElementById("toastSub");
      const toastClose = document.getElementById("toastClose");
      let toastTimer = null;

      function showToast(title, sub){
        if(!toast) return;
        toastTitle.textContent = title || "تمت الإضافة";
        toastSub.textContent = sub || "تمت إضافة المنتج إلى السلة بنجاح.";
        toast.classList.add("show");
        clearTimeout(toastTimer);
        toastTimer = setTimeout(()=> toast.classList.remove("show"), 2600);
      }
      toastClose && toastClose.addEventListener("click", ()=> toast.classList.remove("show"));

      // =======================
      // Cart (same + nice micro interaction)
      // =======================
      let count = 0;

      function pulseCart(){
        const badge = document.getElementById("cartCount");
        if(!badge) return;
        badge.animate(
          [{ transform:"scale(1)" }, { transform:"scale(1.18)" }, { transform:"scale(1)" }],
          { duration: 260, easing:"ease-out" }
        );
      }

      function syncCart(){
        const badge = document.getElementById("cartCount");
        const clearBtn = document.getElementById("btnClearCart");
        if(badge) badge.textContent = String(count);
        if(clearBtn) clearBtn.hidden = count <= 1; // show only if > 1
      }

      document.querySelectorAll("[data-add]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const card = btn.closest(".card");
          const name = card ? (card.querySelector(".name")?.textContent || "المنتج") : "المنتج";
          count++;
          syncCart();
          pulseCart();
          showToast("تمت الإضافة للسلة ✅", `تمت إضافة: ${name}`);
        });
      });

      document.addEventListener("click", function(e){
        if(e.target && e.target.id === "btnClearCart"){
          count = 0;
          syncCart();
          showToast("تم تفريغ السلة ✅", "تم حذف كل المنتجات من السلة.");
        }
      });

      // =======================
      // Image load/error fix + fallback
      // =======================
      document.querySelectorAll(".thumb img").forEach(img=>{
        const thumb = img.closest(".thumb");

        function markLoaded(){
          if(thumb) thumb.classList.add("loaded");
        }

        img.addEventListener("load", markLoaded);

        img.addEventListener("error", () => {
          const kind = img.getAttribute("data-fallback") || "coffee";
          img.src = fallbackSVG(kind);
          markLoaded();
        });

        if(img.complete && img.naturalWidth > 0){
          markLoaded();
        }
      });
    })();
  </script>
</body>
</html>
>>>>>>> d12b6f9 (Initial commit)
